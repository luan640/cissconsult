{% extends "base.html" %}
{% load static %}

{% block title %}Nova senha | PLATAFORMA NR-1{% endblock %}

{% block extra_head %}
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@500;700;800&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="{% static 'css/auth.css' %}" />
{% endblock %}

{% block content %}
<main class="auth-page">
  <section class="auth-card auth-card--center">
    <header class="auth-card__header">
      <div class="auth-brand auth-brand--center">
        <img src="{% static 'img/logo.jpg' %}" alt="Logo" class="auth-brand__logo" />
        <p class="auth-brand__name">PLATAFORMA NR-1</p>
      </div>
      <h1 class="auth-title">Definir nova senha</h1>
      <p class="auth-subtitle">Crie uma nova senha para acessar sua conta.</p>
    </header>

    {% if validlink %}
      {% if form.errors %}
        <div class="auth-alert">Verifique os campos e tente novamente.</div>
      {% endif %}

      <form method="post" class="auth-form">
        {% csrf_token %}
        <div class="auth-field">
          <label for="id_new_password1">Nova senha</label>
          {{ form.new_password1 }}
        </div>
        <div class="auth-field">
          <label for="id_new_password2">Confirmar nova senha</label>
          {{ form.new_password2 }}
        </div>
        <button type="submit" class="auth-submit" data-loading-text="Salvando...">Atualizar senha</button>
      </form>
    {% else %}
      <div class="auth-alert">O link de redefinição é inválido ou expirou.</div>
      <a class="auth-submit" href="{% url 'password_reset' %}">Solicitar novo link</a>
    {% endif %}

    <p class="auth-footer">Lembrou sua senha? <a class="auth-link auth-link--muted" href="{% url 'login' %}">Voltar ao login</a></p>
  </section>
</main>
{% endblock %}
